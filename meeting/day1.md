### 오늘 할 일
방향성 설정
- [x] nextauth의 핵심 가치 알아보기
- [x] nextauth의 핵심 인터페이스 살펴보기
- [] 결제 로직의 일반적인 방식 알아보기, 핵심 구성요소 파악
- [] nextauth에 배울 점 정하기
- [] nextpay의 핵심 가치 정의
- [] nextpay의 핵심 인터페이스 정의
- [] 단계 별 투두 정의
### 핵심 가치
Add authentication in minutes!
Easy
Flexible
Secure
### 핵심 인터페이스
[ 사용 ]
_인터페이스_
/pages/api/auth/[...nextauth]
import { SessionProvider } from "next-auth/react"
import { useSession, signIn, signOut } from "next-auth/react"
- getSession, ...
-
[ 간단 초기화 ]
_프로바이더_
_옵션_
_데이터베이스 어댑터_
_페이지들_
_콜백_
### 방향성
1. 아임포트 대체
1. 프로바이더 요구 & 직접 많이 추가
1. 프레임워크 확장 -> 풀스택 가능한 프레임워크
1. 백엔드랑 프론트가 분리 가능하게
2. 백엔드 서버를 클라우드로 제공
1. 크롬 익스텐션으로 결제하기 기능 -> 티스토리 파워 블로거에게 유료로 판매 & 대형 유튜버에게 판매
1. 유튜버 이용 사례 많아지면 앱에 붙일 수 있는 다음에 유튜브랑 연락해서 유튜브 앱에 붙이기
### 결제의 기본적 동작 사례로 분석하기
_나이스페이먼츠_
1. 클라이언트가 서버에게 결제 요청을 한다.
1. 클라이언트에 결제 창이 뜬다.
1. 고객이 결제한다
1. 서버가 결제을 확인한다
1. 서버에서 나이스페이로 요청 보낸다.
1. 정상 결제면 응답을 서버에게 돌려준다
1. 서버가 완료 결과를 처리해서 클라이언트에 보내준다.
   _토스페이먼츠_

_페이팔_
1. 클라이언트는 주문을 생성하기 위해 "create" 액션을 서버에 요청합니다.
2. 서버는 페이팔에 주문을 생성하고 주문 ID를 클라이언트에게 반환합니다.
3. 클라이언트는 페이팔 결제 페이지로 리다이렉트하고, 사용자는 페이팔에서 결제를 완료합니다.
4. 페이팔은 사용자를 클라이언트로 리다이렉트하고, 이때 주문 ID가 URL에 포함됩니다.
5. 클라이언트는 주문 ID를 받아서 "capture" 액션을 서버에 요청합니다.
6. .서버는 페이팔에 주문 체크아웃을 요청하고 결제를 완료합니다.
### 핵심 구성 요소
버튼 (pay("toss"))
결제 요청 (/api/pay/request, route.ts)
결제 승인 (/api/pay/auth, route.ts)
승인 여부 확인 서버
(결제 결과에 따른 리디렉트 페이지)
결제 실행
결제 확인
결제 결과에 따른 리디렉트 페이지
## 남은 일
[] 단계 별 투두 정의
